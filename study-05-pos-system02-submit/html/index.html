<html>
    <head>
        <title>POSシステム</title>
        <link rel="stylesheet" href="./style.css">
    </head>
    <body>
        <h2>POSシステム</h2>

        <div>
            <span>商品マスターCSVファイル名</span><input id='csv_file' type='text'><br>
            <span>商品コード</span><input id='item_code' type='text'><br>
            <span>商品個数</span><input id='item_unit' type='text'><button id='item_print' type='button'>注文内容表示</button><br>
            <span>支払い金額</span><input id='payment' type='text'><button id='settlement' type='button'>精算</button>
            <textarea id='result' class='log-view-area'></textarea>
        </div>
        <script type="text/javascript" src="./eel.js"></script>
        <!-- <script>
            item_print.addEventListener('click', () => {
                if (csv_file.value === '') {
                    alert('商品マスターのcsvファイルを入力してください');
                } else if (item_code.value === '') {
                    alert('商品コードを入力してください');
                } else if (item_unit.value === '') {
                    alert('商品個数を入力してください');
                } else {
                    eel.main_process(csv_file=csv_file.value, item_code=item_code.value, item_unit=item_unit.value);
                    eel.expose(view_log_js);
                    function view_log_js(text){
                        result.value += text + '\n'; 
                    }
                }
            });
            settlement.addEventListener('click', () => {
                if (payment.value === '') {
                    alert('支払い金額を入力してください');
                } else {
                    eel.main_process(payment=payment.value);
                }
            });
        </script> -->
        <script>
            item_print.addEventListener('click', () => {
                // STEP2
                if (csv_file.value === '') {
                    alert('商品マスターのcsvファイルを入力してください');
                } else if (item_code.value === '') {
                    alert('商品コードを入力してください');
                } else if (item_unit.value === '') {
                    alert('商品個数を入力してください');
                } else {
                    const order = eel.process_order(csv_file=csv_file.value, item_code=item_code.value, item_unit=item_unit.value);
                    // eel.process_order(csv_file=csv_file.value, item_code=item_code.value, item_unit=item_unit.value);
                    eel.expose(view_log_js);
                    function view_log_js(text){
                        result.value += text + '\n'; 
                    }
                }
            });
            settlement.addEventListener('click', () => {
                if (payment.value === '') {
                    alert('支払い金額を入力してください');
                } else {
                    eel.process_settlement(payment.value, order);
                }
            });
        </script>
    </body>
</html>